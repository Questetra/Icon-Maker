!function(e){e(document).ready(function(){function i(){var i=e("#bgcolor").val().split(",");P={r:i[0],g:i[1],b:i[2]}}function l(){I=e("#main-icon").val();var l=e("#main-icon option:selected").data("color");l&&l.length>0&&(e("#bgcolor").val(l),i())}function t(){M=e("#sub-icon").val()}function n(){m=e("#title").val()}function o(){A=e("#sub-title").val()}function a(){g(),v(),d(),f(),x()}function c(e){var i=y[e].subTitle.size,l=y[e].size.width,t=y[e].size.height,n=y[e].size.padding;return!(!A||0==A.length)&&u(i,l/2+i/2,t-n-i/2)}function r(e){var i=y[e].title.size,l=y[e].size.width,t=y[e].size.height,n=y[e].size.padding,o=y[e].subTitle.size,a=u(i,l/2+i/2,t-n-i/2);return A&&0!=A.length&&(a.y-=o*b),a}function s(e){var i=y[e].size.width,l=y[e].size.height,t=y[e].size.padding,n=y[e].title.size,o=y[e].subTitle.size,a=y[e].subIcon.power,c=l-t,r=i-t;1.618*l<i&&(r=1.618*l),A&&0!=A.length&&(c-=o),m&&0!=m.length&&(c-=n*b),(m&&0!=m.length||A&&0!=A.length)&&(c-=t/2,r=i/2+l/2-t);var s=(c-t)*a,h=r-s/2,g=c-s/2,v=u(s,h,g);return{x:v.x,y:v.y,size:s,centerX:h,centerY:g}}function h(e){var i=y[e].size.width,l=y[e].size.height,t=y[e].size.padding,n=y[e].title.size,o=y[e].subTitle.size,a=y[e].withSub,c=t,r=l-t-t,s=t;i-1.618*l>0&&(s=i-1.618*l),A&&0!=A.length&&(r-=o),m&&0!=m.length&&(r-=n*b),(m&&0!=m.length||A&&0!=A.length)&&(r-=t/2,s=i/2-l/2+t),M&&"none"!=M&&(r*=a);var h=s+r/2;M&&"none"!=M||(h=i/2);var g=u(r,h,c+r/2);return{x:g.x,y:g.y,size:r}}function g(){for(var e=y.length-1;e>=0;e--){var i=y[e].ctx;i.fillStyle="rgb("+P.r+", "+P.g+", "+P.b+")",y[e].type&&"icon"==y[e].type?(console.log(y[e].type),i.beginPath(),i.arc(y[e].size.width/2,y[e].size.height/2,Math.round(y[e].size.width/2)-1,0,2*Math.PI,!0),i.fill()):i.fillRect(0,0,y[e].size.width,y[e].size.height)}}function u(e,i,l){return{x:Math.round(i-e/2),y:Math.round(l+.87*e/2)}}function v(){for(var e=y.length-1;e>=0;e--){var i=y[e].ctx;i.textAlign="start",i.fillStyle="rgb(256, 256, 256)";y[e].size.width,y[e].size.padding;var l=y[e].size.height-2*y[e].size.padding;if(y[e].type&&"icon"==y[e].type){var t=2*Math.round(.8*l*.5)-1,n=u(t,y[e].size.width/2,y[e].size.height/2);i.font=t+"px '"+z+"'",i.fillText(I,.9*n.x,n.y)}else{n=h(e);i.font=n.size+"px '"+z+"'",i.fillStyle="rgb(256, 256, 256)",i.fillText(I,n.x,n.y)}}}function d(){for(var e=y.length-1;e>=0;e--){var i=y[e].ctx;y[e].size.width,y[e].size.padding,y[e].size.height,y[e].size.padding;if(y[e].type&&"icon"==y[e].type);else if(M&&"none"!=M){var l=s(e);i.font=l.size+"px '"+z+"'",i.textAlign="start",i.fillStyle="rgb("+P.r+", "+P.g+", "+P.b+")";for(var t=0;t<360;t+=10){var n=Math.PI/180*t,o=Math.cos(n)*l.size*.075,a=Math.sin(n)*l.size*.075;console.log(o,a),i.fillText(M,l.x+o,l.y+a)}i.fillStyle="rgb(256, 256, 256)",i.fillText(M,l.x,l.y)}}}function f(){for(var e=y.length-1;e>=0;e--)if(y[e].type&&"icon"==y[e].type);else{var i=y[e].ctx;if(m&&0!=m.length){i.font="bold "+y[e].title.size+"px 'arial, helvetica, clean, sans-serif'",i.fillStyle="rgb(256, 256, 256)",i.textAlign="center";var l=r(e);i.fillText(m,l.x,l.y)}}}function x(){for(var e=y.length-1;e>=0;e--)if(y[e].type&&"icon"==y[e].type);else{var i=y[e].ctx;if(A&&0!=A.length){i.font=y[e].subTitle.size+"px 'arial, helvetica, clean, sans-serif'",i.fillStyle="rgb(256, 256, 256)",i.textAlign="center";var l=c(e);i.fillText(A,l.x,l.y)}}}console.log("ready");for(var z="Questetra-Icon-Font-A",b=1.5,p=[{label:"Info",value:"&#59648;",color:""},{label:"機能",value:"&#xe901;",color:""},{label:"カレンダー",value:"&#xe902;",color:""},{label:"ドキュメント",value:"&#xe903;",color:""},{label:"チャット",value:"&#xe904;",color:""},{label:"接続",value:"&#xe905;",color:""},{label:"メッセージ",value:"&#xe906;",color:""},{label:"フィルター",value:"&#xe907;",color:""},{label:"加工",value:"&#xe908;",color:""},{label:"アップロード",value:"&#xe909;",color:""},{label:"計算",value:"&#xe90a;",color:""},{label:"削除",value:"&#xe90b;",color:""},{label:"ストレージ",value:"&#xe90c;",color:""},{label:"クレジットカード",value:"&#xe967;",color:""},{label:"Dropbox",value:"&#xe91d;",color:"0,126,229"},{label:"Google Analytics",value:"&#xe929;",color:"245,125,1"},{label:"Google Doc",value:"&#xe92a;",color:""},{label:"Slack",value:"&#xe946;",color:"120,212,182"},{label:"PayPal",value:"&#xe960;",color:"0,112,186"},{label:"Stripe",value:"&#xe966;",color:"62,138,198"}],y=[{id:"canvas-1200x630",ctx:null,size:{width:1200,height:630,padding:60},viewSize:{width:300,height:157.5},withSub:1,title:{size:64},subTitle:{size:46},subIcon:{power:.5}},{id:"canvas-600x315",ctx:null,size:{width:600,height:315,padding:30},viewSize:{width:300,height:157.5},withSub:1,title:{size:32},subTitle:{size:24},subIcon:{power:.5}},{id:"canvas-220x220",ctx:null,size:{width:220,height:220,padding:20},viewSize:{width:220,height:220},withSub:.9,title:{size:18},subTitle:{size:12},subIcon:{power:.5}},{id:"canvas-32x32",ctx:null,size:{width:32,height:32,padding:3},viewSize:{width:32,height:32},type:"icon",title:{size:0}}],w=0;w<p.length;w++){var S=p[w];console.log(S),e(".icon-selector").each(function(i,l){e(this).append('<option value="'+S.value+'" data-color="'+S.color+'">'+S.label+"</option>")})}for(w=y.length-1;w>=0;w--){console.log(y[w]);var T=document.getElementById(y[w].id).getContext("2d");console.log(T),console.log(y[w].ctx),y[w].ctx=T,e("#"+y[w].id).css({width:y[w].viewSize.width,height:y[w].viewSize.height})}var I,M,m,A,P={};e("#bgcolor").change(function(e){i(),a()}),e("#main-icon").change(function(e){l(),a()}),e("#sub-icon").change(function(e){t(),a()}),e("#title").change(function(e){n(),a()}),e("#sub-title").change(function(e){o(),a()}),i(),l(),n(),x(),a()})}(window.jQuery);