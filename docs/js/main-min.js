!function(t){t(document).ready(function(){function i(){var i=t("#bgcolor").val().split(",");b={r:i[0],g:i[1],b:i[2]}}function e(){d=t("#main-icon").val();var e=t("#main-icon option:selected").data("color");e&&e.length>0&&(t("#bgcolor").val(e),i())}function n(){f=t("#title").val()}function l(t){var i=x[t].subTitle.size,e=x[t].size.width,n=x[t].size.height,l=x[t].size.padding;return!(!z||0==z.length)&&c(i,e/2+i/2,n-l-i/2)}function o(t){var i=x[t].title.size,e=x[t].size.width,n=x[t].size.height,l=x[t].size.padding,o=x[t].subTitle.size,a=c(i,e/2+i/2,n-l-i/2);return z&&0!=z.length&&(a.y-=o*p),a}function a(t){var i=x[t].size.width,e=x[t].size.height,n=x[t].size.padding,l=x[t].title.size,o=x[t].subTitle.size,a=x[t].subIcon.power,s=e-n,r=i-n;1.618*e<i&&(r=1.618*e),z&&0!=z.length&&(s-=o),f&&0!=f.length&&(s-=l*p),(f&&0!=f.length||z&&0!=z.length)&&(s-=n/2,r=i/2+e/2-n);var h=(s-n)*a,g=r-h/2,d=s-h/2,u=c(h,g,d);return{x:u.x,y:u.y,size:h,centerX:g,centerY:d}}function s(t){var i=x[t].size.width,e=x[t].size.height,n=x[t].size.padding,l=x[t].title.size,o=x[t].subTitle.size,a=x[t].withSub,s=n,r=e-n-n,h=n;i-1.618*e>0&&(h=i-1.618*e),z&&0!=z.length&&(r-=o),f&&0!=f.length&&(r-=l*p),(f&&0!=f.length||z&&0!=z.length)&&(r-=n/2,h=i/2-e/2+n),u&&"none"!=u&&(r*=a);var g=h+r/2;u&&"none"!=u||(g=i/2);var d=c(r,g,s+r/2);return{x:d.x,y:d.y,size:r}}function c(t,i,e){return{x:Math.round(i-t/2),y:Math.round(e+.87*t/2)}}function r(t,i){var e=[];if(!t||!i||i<1)return e;for(var n=0,l=n,o=l+i;l<t.length;)e[n]=t.substring(l,o),n++,o=(l=o)+i;return e}function h(){!function(){for(var t=x.length-1;t>=0;t--){x[t].ctx.clearRect(0,0,x[t].size.width,x[t].size.height)}}(),function(){for(var t=x.length-1;t>=0;t--){var i=x[t].ctx;i.fillStyle="rgb("+b.r+", "+b.g+", "+b.b+")",x[t].type&&"icon"==x[t].type?(console.log(x[t].type),i.beginPath(),i.arc(x[t].size.width/2,x[t].size.height/2,Math.round(x[t].size.width/2)-1,0,2*Math.PI,!0),i.fill()):i.fillRect(0,0,x[t].size.width,x[t].size.height)}}(),function(){for(var i=x.length-1;i>=0;i--){var e=x[i].ctx;e.textAlign="start",e.fillStyle="rgb(256, 256, 256)";x[i].size.width,x[i].size.padding;var n=x[i].size.height-2*x[i].size.padding;if(x[i].type&&"icon"==x[i].type){var l=2*Math.round(.8*n*.5)-1,o=c(l,x[i].size.width/2,x[i].size.height/2);e.font=l+"px '"+v+"'",e.fillText(d,.9*o.x,o.y);var a=document.getElementById("canvas-32x32").toDataURL("image/png").replace("data:image/png;base64,",""),h=r(a,76).join("\n");console.log(a),t("#base64").val(h)}else{o=s(i);e.font=o.size+"px '"+v+"'",e.fillStyle="rgb(256, 256, 256)",e.fillText(d,o.x,o.y)}}}(),function(){for(var t=x.length-1;t>=0;t--){var i=x[t].ctx;x[t].size.width,x[t].size.padding,x[t].size.height,x[t].size.padding;if(x[t].type&&"icon"==x[t].type);else if(u&&"none"!=u){var e=a(t);i.font=e.size+"px '"+v+"'",i.textAlign="start",i.fillStyle="rgb("+b.r+", "+b.g+", "+b.b+")";for(var n=0;n<360;n+=10){var l=Math.PI/180*n,o=Math.cos(l)*e.size*.075,s=Math.sin(l)*e.size*.075;console.log(o,s),i.fillText(u,e.x+o,e.y+s)}i.fillStyle="rgb(256, 256, 256)",i.fillText(u,e.x,e.y)}}}(),function(){for(var t=x.length-1;t>=0;t--)if(x[t].type&&"icon"==x[t].type);else{var i=x[t].ctx;if(f&&0!=f.length){i.font="bold "+x[t].title.size+"px 'Noto Sans JP'",i.fillStyle="rgb(256, 256, 256)",i.textAlign="center";var e=o(t);i.fillText(f,e.x,e.y)}}}(),g()}function g(){for(var t=x.length-1;t>=0;t--)if(x[t].type&&"icon"==x[t].type);else{var i=x[t].ctx;if(z&&0!=z.length){i.font=x[t].subTitle.size+"px 'Noto Sans JP'",i.fillStyle="rgb(256, 256, 256)",i.textAlign="center";var e=l(t);i.fillText(z,e.x,e.y)}}}for(var d,u,f,z,v="Questetra-Icon-Font-A",p=1.5,b={},x=[{id:"canvas-1200x630",ctx:null,size:{width:1200,height:630,padding:60},viewSize:{width:300,height:157.5},withSub:1,title:{size:64},subTitle:{size:46},subIcon:{power:.5}},{id:"canvas-600x315",ctx:null,size:{width:600,height:315,padding:30},viewSize:{width:300,height:157.5},withSub:1,title:{size:32},subTitle:{size:24},subIcon:{power:.5}},{id:"canvas-440x440",ctx:null,size:{width:440,height:440,padding:40},viewSize:{width:220,height:220},withSub:.9,title:{size:36},subTitle:{size:24},subIcon:{power:.5}},{id:"canvas-32x32",ctx:null,size:{width:32,height:32,padding:3},viewSize:{width:32,height:32},type:"icon",title:{size:0}}],w=0;w<icons.length;w++){var y=icons[w];t(".icon-selector").each(function(i,e){t(this).append('<option value="'+y.value+'" data-color="'+y.color+'">'+y.label+"</option>")})}t("#main-icon option:eq(0)").attr("selected",!0);for(w=x.length-1;w>=0;w--){console.log(x[w]);var S=document.getElementById(x[w].id).getContext("2d");x[w].ctx=S,t("#"+x[w].id).css({width:x[w].viewSize.width,height:x[w].viewSize.height})}if(t("#bgcolor").change(function(t){i(),h()}),t("#main-icon").change(function(t){e(),h()}),t("#sub-icon").change(function(i){u=t("#sub-icon").val(),h()}),t("#title").change(function(t){n(),h()}),t("#sub-title").change(function(i){z=t("#sub-title").val(),h()}),i(),e(),n(),g(),h(),staticIcons)for(w=0;w<staticIcons.length;w++){var m='<div class="row" style="margin-bottom:20px;"><div class="col"><h4><img src="data:image/png;base64,'+staticIcons[w].base64+'" /> '+staticIcons[w].label+'</h4><div class="form-group"><textarea id="base64-static-'+w+'" class="form-control base64" readonly="" rows="12" cols="80">'+r(staticIcons[w].base64,76).join("\n")+"</textarea></div></div></div>";t("#staticIcons").append(m)}})}(window.jQuery);