!function(y){y(document).ready(function(){for(var h,d,f,u,r="Questetra-Icon-Font-A",v=1.5,s={},z=[{id:"canvas-1200x675",ctx:null,size:{width:1200,height:675,padding:60},viewSize:{width:300,height:168.75},withSub:1,title:{size:64},subTitle:{size:46},subIcon:{power:.5}},{id:"canvas-600x315",ctx:null,size:{width:600,height:315,padding:30},viewSize:{width:300,height:157.5},withSub:1,title:{size:32},subTitle:{size:24},subIcon:{power:.5}},{id:"canvas-440x440",ctx:null,size:{width:440,height:440,padding:40},viewSize:{width:220,height:220},withSub:.9,title:{size:36},subTitle:{size:24},subIcon:{power:.5}},{id:"canvas-32x32",ctx:null,size:{width:32,height:32,padding:3},viewSize:{width:32,height:32},type:"icon",title:{size:0}}],i=0;i<icons.length;i++){var e=icons[i];y(".icon-selector").each(function(i,t){y(this).append('<option value="'+e.value+'" data-color="'+e.color+'">'+e.label+"</option>")})}y("#main-icon option:eq(0)").attr("selected",!0);for(i=z.length-1;0<=i;i--){console.log(z[i]);var t=document.getElementById(z[i].id).getContext("2d");z[i].ctx=t,y("#"+z[i].id).css({width:z[i].viewSize.width,height:z[i].viewSize.height})}function n(){var i=y("#bgcolor").val().split(",");s={r:i[0],g:i[1],b:i[2]}}function l(){h=y("#main-icon").val();var i=y("#main-icon option:selected").data("color");i&&0<i.length&&(y("#bgcolor").val(i),n())}function o(){f=y("#title").val()}function c(i){var t=z[i].size.width,e=z[i].size.height,n=z[i].size.padding,l=z[i].title.size,o=z[i].subTitle.size,a=z[i].subIcon.power,s=e-n,c=t-n;1.618*e<t&&(c=1.618*e),u&&0!=u.length&&(s-=o),f&&0!=f.length&&(s-=l*v),(f&&0!=f.length||u&&0!=u.length)&&(s-=n/2,c=t/2+e/2-n);var h=(s-n)*a,r=c-h/2,g=s-h/2,d=p(h,r,g);return{x:d.x,y:d.y,size:h,centerX:r,centerY:g}}function g(i){var t=z[i].size.width,e=z[i].size.height,n=z[i].size.padding,l=z[i].title.size,o=z[i].subTitle.size,a=z[i].withSub,s=n,c=e-n-n,h=n;0<t-1.618*e&&(h=t-1.618*e),u&&0!=u.length&&(c-=o),f&&0!=f.length&&(c-=l*v),(f&&0!=f.length||u&&0!=u.length)&&(c-=n/2,h=t/2-e/2+n),d&&"none"!=d&&(c*=a);var r=h+c/2;d&&"none"!=d||(r=t/2);var g=p(c,r,s+c/2);return{x:g.x,y:g.y,size:c}}function p(i,t,e){return{x:Math.round(t-i/2),y:Math.round(e+.87*i/2)}}function b(i,t){var e=[];if(!i||!t||t<1)return e;for(var n=0,l=n,o=l+t;l<i.length;)e[n]=i.substring(l,o),n++,o=(l=o)+t;return e}function a(){!function(){for(var i=z.length-1;0<=i;i--){var t=z[i].ctx;t.clearRect(0,0,z[i].size.width,z[i].size.height)}}(),function(){for(var i=z.length-1;0<=i;i--){var t=z[i].ctx;t.fillStyle="rgb("+s.r+", "+s.g+", "+s.b+")",z[i].type&&"icon"==z[i].type?(console.log(z[i].type),t.beginPath(),t.arc(z[i].size.width/2,z[i].size.height/2,Math.round(z[i].size.width/2)-1,0,2*Math.PI,!0),t.fill()):t.fillRect(0,0,z[i].size.width,z[i].size.height)}}(),function(){for(var i=z.length-1;0<=i;i--){var t=z[i].ctx;t.textAlign="start",t.fillStyle="rgb(256, 256, 256)";z[i].size.width,z[i].size.padding;var e=z[i].size.height-2*z[i].size.padding;if(z[i].type&&"icon"==z[i].type){var n=2*Math.round(.8*e*.5)-1,l=p(n,z[i].size.width/2,z[i].size.height/2);t.font=n+"px '"+r+"'",t.fillText(h,.9*l.x,l.y);var o=document.getElementById("canvas-32x32"),a=o.toDataURL("image/png"),s=a.replace("data:image/png;base64,",""),c=b(s,76).join("\n");console.log(s),y("#base64").val(c)}else{var l=g(i);t.font=l.size+"px '"+r+"'",t.fillStyle="rgb(256, 256, 256)",t.fillText(h,l.x,l.y)}}}(),function(){for(var i=z.length-1;0<=i;i--){var t=z[i].ctx;z[i].size.width,z[i].size.padding,z[i].size.height,z[i].size.padding;if(z[i].type&&"icon"==z[i].type);else if(d&&"none"!=d){var e=c(i);t.font=e.size+"px '"+r+"'",t.textAlign="start",t.fillStyle="rgb("+s.r+", "+s.g+", "+s.b+")";for(var n=0;n<360;n+=10){var l=Math.PI/180*n,o=Math.cos(l)*e.size*.075,a=Math.sin(l)*e.size*.075;console.log(o,a),t.fillText(d,e.x+o,e.y+a)}t.fillStyle="rgb(256, 256, 256)",t.fillText(d,e.x,e.y)}}}(),function(){for(var i=z.length-1;0<=i;i--)if(z[i].type&&"icon"==z[i].type);else{var t=z[i].ctx;if(f&&0!=f.length){t.font="bold "+z[i].title.size+"px 'Noto Sans JP'",t.fillStyle="rgb(256, 256, 256)",t.textAlign="center";var e=(h=void 0,l=z[n=i].title.size,o=z[n].size.width,a=z[n].size.height,s=z[n].size.padding,c=z[n].subTitle.size,h=p(l,o/2+l/2,a-s-l/2),u&&0!=u.length&&(h.y-=c*v),h);t.fillText(f,e.x,e.y)}}var n,l,o,a,s,c,h}(),x()}function x(){for(var i,t,e,n,l,o=z.length-1;0<=o;o--)if(z[o].type&&"icon"==z[o].type);else{var a=z[o].ctx;if(u&&0!=u.length){a.font=z[o].subTitle.size+"px 'Noto Sans JP'",a.fillStyle="rgb(256, 256, 256)",a.textAlign="center";var s=(void 0,t=z[i=o].subTitle.size,e=z[i].size.width,n=z[i].size.height,l=z[i].size.padding,!(!u||0==u.length)&&p(t,e/2+t/2,n-l-t/2));a.fillText(u,s.x,s.y)}}}if(y("#bgcolor").change(function(i){n(),a()}),y("#main-icon").change(function(i){l(),a()}),y("#sub-icon").change(function(i){d=y("#sub-icon").val(),a()}),y("#title").change(function(i){o(),a()}),y("#sub-title").change(function(i){u=y("#sub-title").val(),a()}),n(),l(),o(),x(),a(),staticIcons)for(i=0;i<staticIcons.length;i++){var w='<div class="row" style="margin-bottom:20px;"><div class="col"><h4><img src="data:image/png;base64,'+staticIcons[i].base64+'" /> '+staticIcons[i].label+'</h4><div class="form-group"><textarea id="base64-static-'+i+'" class="form-control base64" readonly="" rows="12" cols="80">'+b(staticIcons[i].base64,76).join("\n")+"</textarea></div></div></div>";y("#staticIcons").append(w)}})}(window.jQuery);